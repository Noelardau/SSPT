import{o as R,r as p,p as G,a as b,c as M,b as e,u as o,l as r,w as a,q as H,i as v,V as x,e as J,F as K,s as Q,d as g,g as _,m as n,h as S,j as B,k as U,v as w,t as W,x as X,y as Y}from"./index-6a119dec.js";import{a as C}from"./Axios-26df80cc.js";import{V as Z}from"./VSnackbar-51ae4e8d.js";import{V as D,a as P}from"./VTextField-eff10ba3.js";import"./_commonjsHelpers-39b5b250.js";const $={id:"home"},h=J("div",{class:"text-h4"},"Les poètes ",-1),de={__name:"PoeteView",setup(ee){R(()=>{k()});let k=()=>{C.get("/api.poete/findAll").then(d=>A.value=d.data.body.reverse())},c=d=>{y.value=d,i.value=!i.value},A=p([]),s=p({}),u=G({nomPoete:"Nom",prenomPoete:"Prénom",pseudoPoete:""}),y=p(""),N=0;p(!0);let V=p(!1),f=p(!1),m=p(!1),T=()=>m.value=!0,E=()=>{u.nomPoete!=""&&u.prenomPoete!=""&&u.pseudoPoete!=""?C.post("/api.poete/create",u).then(d=>{k(),m.value=!1,c("Nouveau poète enregistré!!"),u.nomPoete="",u.prenomPoete="",u.pseudoPoete=""}):(m.value=!1,c("Veuillez remplire tout les champs!!"),u.nomPoete="",u.prenomPoete="",u.pseudoPoete="")},F=()=>m.value=!1,L=d=>{console.log(d),s.value.nomPoete=d.nomPoete??"",s.value.prenomPoete=d.prenomPoete??"",s.value.pseudoPoete=d.pseudoPoete??"",s.value._id=d._id??"",V.value=!0},j=()=>{C.post("/api.poete/update",s.value).then(d=>{k(),V.value=!1,c("Modification enregistrée!!")})},q=d=>{N=d,f.value=!0},z=()=>{C.get("/api.poete/delete/"+N).then(d=>{k(),f.value=!1,c("suppression effectuée!!")})},I=()=>f.value=!1,i=p(!1);return(d,t)=>(b(),M("div",$,[h,e(r,{icon:"mdi-plus",color:"blue",onClick:o(T)},null,8,["onClick"]),e(H,{lines:"one"},{default:a(()=>[(b(!0),M(K,null,Q(o(A),l=>(b(),X(Y,{key:l._id,title:`${l.pseudoPoete}`,subtitle:"..."},{append:a(()=>[e(r,{color:"blue",icon:"mdi-pencil",variant:"text",onClick:O=>o(L)(l)},null,8,["onClick"]),e(r,{color:"red-lighten-1",icon:"mdi-delete",variant:"text",onClick:O=>o(q)(l._id)},null,8,["onClick"])]),_:2},1032,["title"]))),128))]),_:1}),e(x,{modelValue:o(V),"onUpdate:modelValue":t[4]||(t[4]=l=>v(V)?V.value=l:V=l),persistent:!0,"max-width":"500"},{default:a(()=>[e(g,null,{default:a(()=>[e(_,{class:"text-h5"},{default:a(()=>[n(" Modifier les info concernant le poete ")]),_:1}),e(S,null,{default:a(()=>[e(D,{onSubmit:t[3]||(t[3]=B(()=>{},["prevent"]))},{default:a(()=>[e(P,{label:"Nom",modelValue:o(s).nomPoete,"onUpdate:modelValue":t[0]||(t[0]=l=>o(s).nomPoete=l),autofocus:!0},null,8,["modelValue"]),e(P,{label:"Prénom(s)",modelValue:o(s).prenomPoete,"onUpdate:modelValue":t[1]||(t[1]=l=>o(s).prenomPoete=l)},null,8,["modelValue"]),e(P,{label:"Pseudo",modelValue:o(s).pseudoPoete,"onUpdate:modelValue":t[2]||(t[2]=l=>o(s).pseudoPoete=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(U,null,{default:a(()=>[e(w),e(r,{type:"submit",block:"",class:"mt-2",onClick:o(j)},{default:a(()=>[n("Enregistrer")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(x,{modelValue:o(m),"onUpdate:modelValue":t[9]||(t[9]=l=>v(m)?m.value=l:m=l),persistent:!0,"max-width":"500"},{default:a(()=>[e(g,null,{default:a(()=>[e(_,{class:"text-h5"},{default:a(()=>[n(" Ajouter un nouveau poète ")]),_:1}),e(S,null,{default:a(()=>[e(D,{onSubmit:t[8]||(t[8]=B(()=>{},["prevent"]))},{default:a(()=>[e(P,{label:"Nom",modelValue:o(u).nomPoete,"onUpdate:modelValue":t[5]||(t[5]=l=>o(u).nomPoete=l),autofocus:!0},null,8,["modelValue"]),e(P,{label:"Prénom(s)",modelValue:o(u).prenomPoete,"onUpdate:modelValue":t[6]||(t[6]=l=>o(u).prenomPoete=l)},null,8,["modelValue"]),e(P,{label:"Pseudo",modelValue:o(u).pseudoPoete,"onUpdate:modelValue":t[7]||(t[7]=l=>o(u).pseudoPoete=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(U,null,{default:a(()=>[e(w),e(r,{type:"submit",class:"mt-2",onClick:o(E)},{default:a(()=>[n("Enregistrer")]),_:1},8,["onClick"]),e(r,{type:"submit",class:"mt-2",onClick:o(F)},{default:a(()=>[n("Annuler")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(x,{modelValue:o(f),"onUpdate:modelValue":t[10]||(t[10]=l=>v(f)?f.value=l:f=l),persistent:!0,"max-width":"500"},{default:a(()=>[e(g,null,{default:a(()=>[e(_,{class:"text-h5"},{default:a(()=>[n(" Supprimer ce poète de la liste ? ")]),_:1}),e(U,null,{default:a(()=>[e(w),e(r,{color:"primary",variant:"text",class:"mt-2",onClick:o(I)},{default:a(()=>[n("Non")]),_:1},8,["onClick"]),e(r,{color:"red",variant:"text",class:"mt-2",onClick:o(z)},{default:a(()=>[n("Oui, supprimer")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Z,{modelValue:o(i),"onUpdate:modelValue":t[12]||(t[12]=l=>v(i)?i.value=l:i=l),timeout:1e3},{actions:a(()=>[e(r,{color:"blue",variant:"text",onClick:t[11]||(t[11]=l=>v(i)?i.value=!1:i=!1)},{default:a(()=>[n(" Close ")]),_:1})]),default:a(()=>[n(W(o(y))+" ",1)]),_:1},8,["modelValue"])]))}};export{de as default};
