import{o as W,A as D,r as n,a as v,c as x,b as e,w as a,d as b,u as i,l as r,q as P,i as g,V as M,F as C,e as X,h as N,s as A,g as R,m,k as $,v as q,j as Y,t as Z,x as y,y as w}from"./index-509092f4.js";import{a as k}from"./Axios-26df80cc.js";import{V as ee}from"./VSnackbar-ac0695fb.js";import{V as I,a as te}from"./VTextField-fd3c325b.js";import{V as le}from"./VSelect-d8b283de.js";import"./_commonjsHelpers-39b5b250.js";const ae=X("h1",{class:"text-h4"},"Liste des participants ",-1),pe={__name:"Participants",setup(ie){W(()=>{k.get("/api.tournoi/participants/"+D().params.idTournoi).then(l=>{u.value=l.data}),k.get("/api.tournoi/get/"+D().params.idTournoi).then(l=>{s.value=l.data,console.log(s.value)}),k.get("/api.poete/findAll/").then(l=>{S.value=l.data.body})});let s=n(),u=n([]),E=n(u),d=n([]),h=n(0),S=n([]),p=n(!1),T=n("Participants enregistrés!!!"),j=l=>{T.value=l,p.value=!p.value};n([{state:"madagasikara",abbr:"mada"},{state:"France",abbr:"frs"}]);let c=n({pseudoPoete:"Poète",_id:0}),f=n(!1),_=n(!1),K=()=>{f.value=!0},z=()=>{u.value=[...d.value,...u.value],s.value.participants=[...d.value.map(l=>l._id),...s.value.participants],console.log(s.value),k.post("/api.tournoi/update/",s.value).then(l=>{L(),j("Participants enregistrés!!")})},B=l=>{h.value=l,_.value=!0},G=()=>{u.value=u.value.filter(l=>l._id!=h.value),s.value.participants=s.value.participants.filter(l=>l!=h.value),k.post("/api.tournoi/update/",s.value).then(l=>{F(),j("Le poète a été retiré du tournoi!!")})},F=()=>{_.value=!1},L=()=>{f.value=!1,d.value=[]},H=()=>{d.value.filter(l=>l._id==c.value._id).length==0&&u.value.filter(l=>l._id==c.value._id).length==0?(d.value=[...d.value,c.value],c.value={pseudoPoete:"poete",_id:0}):alert("participant déjà ajouté")},J=l=>{d.value=d.value.filter(o=>o._id!=l)},V=n(),O=n({}),Q=()=>{O.value=u.value.filter(l=>u.value.indexOf(l)+1==parseInt(V.value)),console.log(u.value.filter(l=>u.value.indexOf(l)+1==parseInt(V.value)))};return(l,o)=>(v(),x(C,null,[ae,e(b,{"max-width":"250",elevation:"0"},{default:a(()=>[e(N,null,{default:a(()=>[e(I,null,{default:a(()=>[e(te,{label:"poète numero?","append-icon":"mdi-account-search",onKeyup:i(Q),modelValue:i(V),"onUpdate:modelValue":o[0]||(o[0]=t=>g(V)?V.value=t:V=t)},null,8,["onKeyup","modelValue"])]),_:1})]),_:1})]),_:1}),e(r,{icon:"mdi-plus",color:"blue",onClick:i(K)},null,8,["onClick"]),e(P,{lines:"one"},{default:a(()=>[(v(!0),x(C,null,A(i(O),t=>(v(),y(w,{key:t._id,title:`${i(u).indexOf(t)+1}) ${t.pseudoPoete}`,subtitle:"..."},{append:a(()=>[e(r,{color:"green-lighten-1",variant:"text",to:{name:"performance",params:{idPoete:t._id}},icon:"mdi-shape-square-plus"},null,8,["to"]),e(r,{color:"green-lighten-1",variant:"text",to:{name:"statPerso",params:{idPoete:t._id}},icon:"mdi-format-list-bulleted"},null,8,["to"]),e(r,{color:"red-lighten-1",icon:"mdi-delete",variant:"text",onClick:U=>i(B)(t._id)},null,8,["onClick"])]),_:2},1032,["title"]))),128))]),_:1}),e(P,{lines:"one"},{default:a(()=>[(v(!0),x(C,null,A(i(E),t=>(v(),y(w,{key:t._id,title:`${i(u).indexOf(t)+1}) ${t.pseudoPoete}`,subtitle:"..."},{append:a(()=>[e(r,{color:"green-lighten-1",variant:"text",to:{name:"performance",params:{idPoete:t._id}},icon:"mdi-shape-square-plus"},null,8,["to"]),e(r,{color:"green-lighten-1",variant:"text",to:{name:"statPerso",params:{idPoete:t._id}},icon:"mdi-format-list-bulleted"},null,8,["to"]),e(r,{color:"red-lighten-1",icon:"mdi-delete",variant:"text",onClick:U=>i(B)(t._id)},null,8,["onClick"])]),_:2},1032,["title"]))),128))]),_:1}),e(M,{modelValue:i(_),"onUpdate:modelValue":o[1]||(o[1]=t=>g(_)?_.value=t:_=t),persistent:!0,"max-width":"500"},{default:a(()=>[e(b,null,{default:a(()=>[e(R,{class:"text-h5"},{default:a(()=>[m(" Supprimer ce poète de la liste ? ")]),_:1}),e($,null,{default:a(()=>[e(q),e(r,{color:"primary",variant:"text",class:"mt-2",onClick:i(F)},{default:a(()=>[m("Non")]),_:1},8,["onClick"]),e(r,{color:"red",variant:"text",class:"mt-2",onClick:i(G)},{default:a(()=>[m("Oui, supprimer")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(M,{modelValue:i(f),"onUpdate:modelValue":o[4]||(o[4]=t=>g(f)?f.value=t:f=t),persistent:!0,"max-width":"500"},{default:a(()=>[e(b,null,{default:a(()=>[e(R,{class:"text-h5"},{default:a(()=>[m(" Ajouter des participants ")]),_:1}),e(N,null,{default:a(()=>[e(I,{onSubmit:o[3]||(o[3]=Y(()=>{},["prevent"]))},{default:a(()=>[e(le,{modelValue:i(c),"onUpdate:modelValue":o[2]||(o[2]=t=>g(c)?c.value=t:c=t),items:i(S),"item-title":"pseudoPoete","item-value":"_id",label:"Select","persistent-hint":"","return-object":"","single-line":""},null,8,["modelValue","items"]),e(r,{color:"primary",onClick:i(H)},{default:a(()=>[m("Ajouter")]),_:1},8,["onClick"])]),_:1}),e(P,{lines:"one"},{default:a(()=>[(v(!0),x(C,null,A(i(d),t=>(v(),y(w,{key:t._id,title:`  ${t.pseudoPoete}`,subtitle:"..."},{append:a(()=>[e(r,{color:"red-lighten-1",icon:"mdi-delete",variant:"text",onClick:U=>i(J)(t._id)},null,8,["onClick"])]),_:2},1032,["title"]))),128))]),_:1})]),_:1}),e($,null,{default:a(()=>[e(q),e(r,{type:"submit",class:"mt-2",onClick:i(z)},{default:a(()=>[m("Enregistrer")]),_:1},8,["onClick"]),e(r,{type:"submit",class:"mt-2",onClick:i(L)},{default:a(()=>[m("Annuler")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ee,{modelValue:i(p),"onUpdate:modelValue":o[6]||(o[6]=t=>g(p)?p.value=t:p=t),timeout:1e3},{actions:a(()=>[e(r,{color:"blue",variant:"text",onClick:o[5]||(o[5]=t=>g(p)?p.value=!1:p=!1)},{default:a(()=>[m(" Close ")]),_:1})]),default:a(()=>[m(Z(i(T))+" ",1)]),_:1},8,["modelValue"])],64))}};export{pe as default};
