import{o as z,A as j,r as o,a as _,c as C,b as e,u as i,l as u,w as a,q as w,i as V,V as S,F as x,e as G,s as B,d as T,g as F,m as s,k as L,v as D,h as H,j as J,t as K,x as M,y as N}from"./index-ecabd237.js";import{a as k}from"./Axios-26df80cc.js";import{V as Q}from"./VSnackbar-be4a19fb.js";import{V as W}from"./VTextField-fffa121a.js";import{V as X}from"./VSelect-8ad37e7e.js";import"./_commonjsHelpers-39b5b250.js";const Y=G("h1",{class:"text-h4"},"Liste des participants ",-1),oe={__name:"Participants",setup(Z){z(()=>{k.get("/api.tournoi/participants/"+j().params.idTournoi).then(t=>{m.value=t.data}),k.get("/api.tournoi/get/"+j().params.idTournoi).then(t=>{n.value=t.data,console.log(n.value)}),k.get("/api.poete/findAll/").then(t=>{b.value=t.data.body})});let n=o(),m=o([]),d=o([]),g=o(0),b=o([]),p=o(!1),h=o("Participants enregistrés!!!"),A=t=>{h.value=t,p.value=!p.value};o([{state:"madagasikara",abbr:"mada"},{state:"France",abbr:"frs"}]);let c=o({pseudoPoete:"Poète",_id:0}),v=o(!1),f=o(!1),R=()=>{v.value=!0},U=()=>{m.value=[...d.value,...m.value],n.value.participants=[...d.value.map(t=>t._id),...n.value.participants],console.log(n.value),k.post("/api.tournoi/update/",n.value).then(t=>{y(),A("Participants enregistrés!!")})},E=t=>{g.value=t,f.value=!0},O=()=>{m.value=m.value.filter(t=>t._id!=g.value),n.value.participants=n.value.participants.filter(t=>t!=g.value),k.post("/api.tournoi/update/",n.value).then(t=>{P(),A("Le poète a été retiré du tournoi!!")})},P=()=>{f.value=!1},y=()=>{v.value=!1,d.value=[]},$=()=>{d.value.filter(t=>t._id==c.value._id).length==0&&m.value.filter(t=>t._id==c.value._id).length==0?(d.value=[...d.value,c.value],c.value={pseudoPoete:"poete",_id:0}):alert("participant déjà ajouté")},q=t=>{d.value=d.value.filter(r=>r._id!=t)};return(t,r)=>(_(),C(x,null,[Y,e(u,{icon:"mdi-plus",color:"blue",onClick:i(R)},null,8,["onClick"]),e(w,{lines:"one"},{default:a(()=>[(_(!0),C(x,null,B(i(m),l=>(_(),M(N,{key:l._id,title:`${i(m).indexOf(l)+1}) ${l.pseudoPoete}`,subtitle:"..."},{append:a(()=>[e(u,{color:"green-lighten-1",variant:"text",to:{name:"performance",params:{idPoete:l._id}}},{default:a(()=>[s(" créer performance ")]),_:2},1032,["to"]),e(u,{color:"green-lighten-1",variant:"text",to:{name:"statPerso",params:{idPoete:l._id}}},{default:a(()=>[s(" les stats du poète ")]),_:2},1032,["to"]),e(u,{color:"red-lighten-1",icon:"mdi-delete",variant:"text",onClick:I=>i(E)(l._id)},null,8,["onClick"])]),_:2},1032,["title"]))),128))]),_:1}),e(S,{modelValue:i(f),"onUpdate:modelValue":r[0]||(r[0]=l=>V(f)?f.value=l:f=l),persistent:!0,"max-width":"500"},{default:a(()=>[e(T,null,{default:a(()=>[e(F,{class:"text-h5"},{default:a(()=>[s(" Supprimer ce poète de la liste ? ")]),_:1}),e(L,null,{default:a(()=>[e(D),e(u,{color:"primary",variant:"text",class:"mt-2",onClick:i(P)},{default:a(()=>[s("Non")]),_:1},8,["onClick"]),e(u,{color:"red",variant:"text",class:"mt-2",onClick:i(O)},{default:a(()=>[s("Oui, supprimer")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(S,{modelValue:i(v),"onUpdate:modelValue":r[3]||(r[3]=l=>V(v)?v.value=l:v=l),persistent:!0,"max-width":"500"},{default:a(()=>[e(T,null,{default:a(()=>[e(F,{class:"text-h5"},{default:a(()=>[s(" Ajouter des participants ")]),_:1}),e(H,null,{default:a(()=>[e(W,{onSubmit:r[2]||(r[2]=J(()=>{},["prevent"]))},{default:a(()=>[e(X,{modelValue:i(c),"onUpdate:modelValue":r[1]||(r[1]=l=>V(c)?c.value=l:c=l),items:i(b),"item-title":"pseudoPoete","item-value":"_id",label:"Select","persistent-hint":"","return-object":"","single-line":""},null,8,["modelValue","items"]),e(u,{color:"primary",onClick:i($)},{default:a(()=>[s("Ajouter")]),_:1},8,["onClick"])]),_:1}),e(w,{lines:"one"},{default:a(()=>[(_(!0),C(x,null,B(i(d),l=>(_(),M(N,{key:l._id,title:`  ${l.pseudoPoete}`,subtitle:"..."},{append:a(()=>[e(u,{color:"red-lighten-1",icon:"mdi-delete",variant:"text",onClick:I=>i(q)(l._id)},null,8,["onClick"])]),_:2},1032,["title"]))),128))]),_:1})]),_:1}),e(L,null,{default:a(()=>[e(D),e(u,{type:"submit",class:"mt-2",onClick:i(U)},{default:a(()=>[s("Enregistrer")]),_:1},8,["onClick"]),e(u,{type:"submit",class:"mt-2",onClick:i(y)},{default:a(()=>[s("Annuler")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Q,{modelValue:i(p),"onUpdate:modelValue":r[5]||(r[5]=l=>V(p)?p.value=l:p=l),timeout:1e3},{actions:a(()=>[e(u,{color:"blue",variant:"text",onClick:r[4]||(r[4]=l=>V(p)?p.value=!1:p=!1)},{default:a(()=>[s(" Close ")]),_:1})]),default:a(()=>[s(K(i(h))+" ",1)]),_:1},8,["modelValue"])],64))}};export{oe as default};
